(*.F- *)
(**********************************************************************
|  Title   : Read data from GPS
|  Author  :
|  System  : LOGITECH MODULA-2/86
|  History :
|    M.Postol: 12.12.95:
|      DtaSignType concept was implemented
|    05-01-98: M.Postol
|      wywalilem nieuzywane GPSScan
|      nowy par. DiffMode w GPSReceive
|
|  23.12.97 Usuniety czas i data Tomek
|  Copyright (C), CAS LODZ POLAND.
|  TEL: 42' 86 58 12, 42' 87 80 44 FAX/TEL: 42' 84 48 40
|
**********************************************************************)
(*.F+ *)

DEFINITION MODULE GPSRead;

  FROM CommonTypes IMPORT
    PolozenieGeo;

  TYPE
    StanyGPS    =
      ( Flaga,
        BledyWTransmisji,
        NieMaTransmisji,
        DaneZatechle,
        SaNoweDane,
        res5,
        res6,
        res7,
        res8 );
        
        (*Flaga ustawiana w momencie ustawienia flagi o polozeniu z GPS*)
        (*BledyWTransmisji ustawana ze zbioru gdy nie ma bledu sumy kontrolnej  *)
        (*NieMaTransmisji ustawana ze zbioru gdy odbiorano cala ramke*)
        (*DaneZatechle ustawana ze zbioru gdy w zbiorze jest SaNoweDane*)
        (*SaNoweDane ustawiana w momencie odbioru ramki i braku flagi o polozeniu z 
        GPS*)
       StanGPS = SET OF StanyGPS;
    DtaSignType = CARDINAL;

  PROCEDURE GPSReceive
            ( VAR pg       : PolozenieGeo;
              VAR GDOP     : CARDINAL;
              VAR NOS      : CARDINAL;
              VAR EPE      : CARDINAL;
              VAR DiffMode : BOOLEAN;
              VAR dtaSign  : DtaSignType  ) : StanGPS;
              
       (* pg polozenie geograficzne zwracana zawsze wartosc dobra lub zla *)
       (* GDOP rozmycie pozycji w przypadku wystapienia flagi zwracana DisNilVal*)
       (* NOS liczba satelitow w przypadku wystapienia flagi zwracana DisNilVal*)
       (* EPE blad pozycji zawsze zwracana DisNilVal*)
       (* dtaSign licznik odebranych ramek pozycji zwiekszana gdy nie ma flagi*)
  PROCEDURE GetDirection
            ( VAR dtaSign : DtaSignType ) : REAL;
    (* kierunek lotu wzgledem prawdziwej N *)
    (* dtaSign licznik odebranych ramek pozycji zwiekszana gdy nie ma flagi*)
    
  PROCEDURE GetCurrDataSign() : DtaSignType;
    (* dtaSign licznik odebranych ramek pozycji zwiekszana gdy nie ma flagi*)

END GPSRead.
p